#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸ§ª Running environment check before push..."

# Default to production unless specified
ENV="${ENV:-production}"

# Run the check
node ./src/check-env.js $ENV

if [ $? -ne 0 ]; then
  echo "âŒ Env check failed. Push aborted."
  exit 1
fi

echo "âœ… Env check passed. Proceeding with push..."

npm test

if [ $? -ne 0 ]; then
  echo "âŒ Unit Tests Failed. Push aborted."
  exit 1
fi

echo "âœ… Test Passed. Proceeding with push..."